# íŒŒì´ì¬ ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë° ì™„ì „ì •ë³µ ğŸš€

## ëª©ì°¨
1. [ê¸°ì´ˆ ê°œë…](#1-ê¸°ì´ˆ-ê°œë…)
2. [ì´ë²¤íŠ¸ ë£¨í”„ì˜ ì´í•´](#2-ì´ë²¤íŠ¸-ë£¨í”„ì˜-ì´í•´)
3. [Async/Await ë¬¸ë²•](#3-asyncawait-ë¬¸ë²•)
4. [ì½”ë£¨í‹´ê³¼ íƒœìŠ¤í¬](#4-ì½”ë£¨í‹´ê³¼-íƒœìŠ¤í¬)
5. [ë™ì‹œì„± ì œì–´](#5-ë™ì‹œì„±-ì œì–´)
6. [ì˜ˆì™¸ ì²˜ë¦¬](#6-ì˜ˆì™¸-ì²˜ë¦¬)
7. [ì‹¤ì „ íŒ¨í„´](#7-ì‹¤ì „-íŒ¨í„´)
8. [ë¼ì´ë¸ŒëŸ¬ë¦¬ ìƒíƒœê³„](#8-ë¼ì´ë¸ŒëŸ¬ë¦¬-ìƒíƒœê³„)
9. [ì„±ëŠ¥ ìµœì í™”](#9-ì„±ëŠ¥-ìµœì í™”)
10. [ì‹¤ìŠµ í”„ë¡œì íŠ¸](#10-ì‹¤ìŠµ-í”„ë¡œì íŠ¸)

---

## 1. ê¸°ì´ˆ ê°œë…

### 1.1 ì™œ ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°ì´ í•„ìš”í•œê°€?

**ë™ê¸° í”„ë¡œê·¸ë˜ë°ì˜ ë¬¸ì œì :**
```python
import time
import requests

# ë™ê¸° ë°©ì‹: í•œ ìš”ì²­ì´ ëë‚  ë•Œê¹Œì§€ ë‹¤ìŒ ì½”ë“œ ì‹¤í–‰ ì•ˆ ë¨
start = time.time()
response1 = requests.get("https://api.example.com/data1")  # 2ì´ˆ ëŒ€ê¸°
response2 = requests.get("https://api.example.com/data2")  # 2ì´ˆ ëŒ€ê¸°
response3 = requests.get("https://api.example.com/data3")  # 2ì´ˆ ëŒ€ê¸°
print(f"ì´ ì†Œìš” ì‹œê°„: {time.time() - start:.1f}ì´ˆ")  # ì•½ 6ì´ˆ
```

**ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°ì˜ ì¥ì :**
```python
import asyncio
import aiohttp

# ë¹„ë™ê¸° ë°©ì‹: ì—¬ëŸ¬ ìš”ì²­ì„ ë™ì‹œì— ì²˜ë¦¬
async def fetch_all():
    async with aiohttp.ClientSession() as session:
        tasks = [
            session.get("https://api.example.com/data1"),
            session.get("https://api.example.com/data2"),
            session.get("https://api.example.com/data3"),
        ]
        responses = await asyncio.gather(*tasks)
        return responses

# ì•½ 2ì´ˆë¡œ ê°ì†Œ!
start = time.time()
results = asyncio.run(fetch_all())
print(f"ì´ ì†Œìš” ì‹œê°„: {time.time() - start:.1f}ì´ˆ")
```

### 1.2 í•µì‹¬ ê°œë…

**ë™ì‹œì„±(Concurrency) vs ë³‘ë ¬ì„±(Parallelism)**
- **ë™ì‹œì„±**: ì—¬ëŸ¬ ì‘ì—…ì„ ë²ˆê°ˆì•„ê°€ë©° ì²˜ë¦¬ (ë¹„ë™ê¸°)
- **ë³‘ë ¬ì„±**: ì—¬ëŸ¬ ì‘ì—…ì„ ì •ë§ë¡œ ë™ì‹œì— ì²˜ë¦¬ (ë©€í‹°í”„ë¡œì„¸ì‹±)

**ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°ì˜ 3ìš”ì†Œ**
1. **ì½”ë£¨í‹´(Coroutine)**: `async def`ë¡œ ì •ì˜ëœ í•¨ìˆ˜
2. **ì´ë²¤íŠ¸ ë£¨í”„(Event Loop)**: ì½”ë£¨í‹´ë“¤ì„ ê´€ë¦¬í•˜ê³  ì‹¤í–‰
3. **Future/Task**: ë¯¸ë˜ì— ì™„ë£Œë  ì‘ì—…ì˜ í‘œí˜„

**Python asyncio ì‚¬ìš©ë¥  ì¦ê°€**
- 2023ë…„: 20% â†’ 2024ë…„: 23% (3% ì¦ê°€)
- ìµœì‹  ì›¹ í”„ë ˆì„ì›Œí¬(FastAPI, Starlette ë“±)ì˜ ê¸°ë°˜

---

## 2. ì´ë²¤íŠ¸ ë£¨í”„ì˜ ì´í•´

### 2.1 ì´ë²¤íŠ¸ ë£¨í”„ë€?

ì´ë²¤íŠ¸ ë£¨í”„ëŠ” Pythonì˜ ë‹¨ì¼ ìŠ¤ë ˆë“œì—ì„œ ë¹„ë™ê¸° ì‘ì—…ì„ ê´€ë¦¬í•˜ëŠ” **ë©”ì¸ ì œì–´ì**ì…ë‹ˆë‹¤.

```python
import asyncio

# ì´ë²¤íŠ¸ ë£¨í”„ ìƒì„± ë° ì‹¤í–‰
async def hello():
    print("ì‹œì‘")
    await asyncio.sleep(1)
    print("ë")

# asyncio.run()ì´ ë‚´ë¶€ì ìœ¼ë¡œ:
# 1. ì´ë²¤íŠ¸ ë£¨í”„ ìƒì„±
# 2. ì½”ë£¨í‹´ ì‹¤í–‰
# 3. ì™„ë£Œ í›„ ì´ë²¤íŠ¸ ë£¨í”„ ì¢…ë£Œ
asyncio.run(hello())
```

### 2.2 ì´ë²¤íŠ¸ ë£¨í”„ì˜ ë™ì‘ ë©”ì»¤ë‹ˆì¦˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Event Loop ì‹¤í–‰ ìˆœì„œ              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. ì½œ ìŠ¤íƒ(Call Stack)ì—ì„œ ë™ê¸° ì½”ë“œ ì‹¤í–‰ â”‚
â”‚ 2. await ë§Œë‚¨ â†’ ì´ë²¤íŠ¸ ë£¨í”„ì— ì œì–´ê¶Œ ì–‘ë³´ â”‚
â”‚ 3. ë‹¤ë¥¸ ì½”ë£¨í‹´ ì‹¤í–‰ ê°€ëŠ¥                 â”‚
â”‚ 4. ëŒ€ê¸° ì¤‘ì¸ ì‘ì—… ì™„ë£Œ â†’ ì½œìŠ¤íƒ ì¬ê°œ     â”‚
â”‚ 5. ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ í ì²˜ë¦¬ (ë†’ì€ ìš°ì„ ìˆœìœ„) â”‚
â”‚ 6. ë§¤í¬ë¡œíƒœìŠ¤í¬ í ì²˜ë¦¬ (ë‚®ì€ ìš°ì„ ìˆœìœ„)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 ì‹¤ì œ ë™ì‘ ì˜ˆì œ

```python
import asyncio

async def task(name, duration):
    print(f"[ì‹œì‘] {name}")
    await asyncio.sleep(duration)  # ì—¬ê¸°ì„œ ì œì–´ê¶Œ ì–‘ë³´
    print(f"[ë] {name}")
    return f"{name} ì™„ë£Œ"

async def main():
    # 3ê°œì˜ ì‘ì—…ì„ ë™ì‹œì— ì‹œì‘
    results = await asyncio.gather(
        task("Task-A", 2),  # 2ì´ˆ
        task("Task-B", 1),  # 1ì´ˆ
        task("Task-C", 3),  # 3ì´ˆ
    )
    print("ëª¨ë“  ì‘ì—… ì™„ë£Œ:", results)

asyncio.run(main())

# ì¶œë ¥:
# [ì‹œì‘] Task-A
# [ì‹œì‘] Task-B
# [ì‹œì‘] Task-C
# [ë] Task-B         (1ì´ˆ í›„)
# [ë] Task-A         (2ì´ˆ í›„)
# [ë] Task-C         (3ì´ˆ í›„)
# ëª¨ë“  ì‘ì—… ì™„ë£Œ: ['Task-A ì™„ë£Œ', 'Task-B ì™„ë£Œ', 'Task-C ì™„ë£Œ']
```

**ì‹¤í–‰ ì‹œê°„**: Task-A(2ì´ˆ) + Task-B(1ì´ˆ) + Task-C(3ì´ˆ) = ì•½ 3ì´ˆ
- ë™ê¸° ì²˜ë¦¬: 2 + 1 + 3 = 6ì´ˆ
- **ë¹„ë™ê¸° ì²˜ë¦¬ë¡œ 50% ë‹¨ì¶•!**

### 2.4 ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ vs ë§¤í¬ë¡œíƒœìŠ¤í¬

```python
import asyncio

async def main():
    print("1. ì‹œì‘")
    await asyncio.sleep(0)  # ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ë¡œ ë“±ë¡
    print("3. Promise/async-await ì‹¤í–‰ (ë§ˆì´í¬ë¡œ)")
    await asyncio.sleep(1)  # ë§¤í¬ë¡œíƒœìŠ¤í¬ë¡œ ë“±ë¡
    print("4. setTimeout ê°™ì€ ì‘ì—… (ë§¤í¬ë¡œ)")

print("2. ë™ê¸° ì½”ë“œ")
asyncio.run(main())

# ì‹¤í–‰ ìˆœì„œ:
# 1. ì‹œì‘ (ë™ê¸°)
# 2. ë™ê¸° ì½”ë“œ (ë™ê¸°)
# 3. Promise/async-await ì‹¤í–‰ (ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ ìš°ì„ )
# 4. setTimeout ê°™ì€ ì‘ì—… (ë§¤í¬ë¡œíƒœìŠ¤í¬)
```

---

## 3. Async/Await ë¬¸ë²•

### 3.1 ê¸°ë³¸ ë¬¸ë²•

```python
import asyncio

# async def: ë¹„ë™ê¸° í•¨ìˆ˜ ì •ì˜
async def fetch_data():
    print("ë°ì´í„° ìš”ì²­ ì‹œì‘")
    await asyncio.sleep(2)  # 2ì´ˆ ëŒ€ê¸° (ë¹„ë™ê¸°)
    print("ë°ì´í„° ìˆ˜ì‹ ")
    return "ë°ì´í„°"

# await: ë¹„ë™ê¸° í•¨ìˆ˜ ì‹¤í–‰ ë° ì™„ë£Œ ëŒ€ê¸°
async def main():
    result = await fetch_data()
    print(f"ê²°ê³¼: {result}")

asyncio.run(main())
```

### 3.2 await ì‚¬ìš© ê·œì¹™

```python
import asyncio

# âŒ ì˜ëª»ëœ ì‚¬ìš©: awaitëŠ” async def ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥
# await asyncio.sleep(1)  # SyntaxError!

# âœ… ì˜¬ë°”ë¥¸ ì‚¬ìš©
async def correct():
    await asyncio.sleep(1)

# âŒ ì˜ëª»ëœ ì‚¬ìš©: async í•¨ìˆ˜ë¥¼ í˜¸ì¶œë§Œ í•˜ë©´ ì½”ë£¨í‹´ ê°ì²´ê°€ ë°˜í™˜ë¨
async def demo():
    task = fetch_data()  # ì‹¤í–‰ë˜ì§€ ì•ŠìŒ!
    # RuntimeWarning: coroutine was never awaited

# âœ… ì˜¬ë°”ë¥¸ ì‚¬ìš©
async def demo_correct():
    result = await fetch_data()  # ì‹¤í–‰ë¨
```

### 3.3 asyncio.sleep()ê³¼ time.sleep()ì˜ ì°¨ì´

```python
import asyncio
import time

async def async_example():
    print("ë¹„ë™ê¸°: ì‹œì‘")
    await asyncio.sleep(2)  # ì´ë²¤íŠ¸ ë£¨í”„ì— ì œì–´ê¶Œ ì–‘ë³´ â†’ ë‹¤ë¥¸ ì‘ì—… ê°€ëŠ¥
    print("ë¹„ë™ê¸°: ë")

def sync_example():
    print("ë™ê¸°: ì‹œì‘")
    time.sleep(2)  # ìŠ¤ë ˆë“œ ë¸”ë¡œí‚¹ â†’ ë‹¤ë¥¸ ì‘ì—… ë¶ˆê°€ëŠ¥
    print("ë™ê¸°: ë")

# asyncio.sleep()ì€ ì œì–´ê¶Œì„ ì–‘ë³´í•˜ë¯€ë¡œ ë‹¤ë¥¸ ì‘ì—…ì´ ì‹¤í–‰ë  ìˆ˜ ìˆìŒ
# time.sleep()ì€ ìŠ¤ë ˆë“œë¥¼ ë¸”ë¡œí‚¹í•˜ë¯€ë¡œ ì•„ë¬´ê²ƒë„ ì‹¤í–‰ë  ìˆ˜ ì—†ìŒ
```

---

## 4. ì½”ë£¨í‹´ê³¼ íƒœìŠ¤í¬

### 4.1 ì½”ë£¨í‹´ vs íƒœìŠ¤í¬

```python
import asyncio

async def my_coroutine():
    await asyncio.sleep(1)
    return "ê²°ê³¼"

async def main():
    # ì½”ë£¨í‹´: async í•¨ìˆ˜ í˜¸ì¶œ
    coro = my_coroutine()
    print(f"íƒ€ì…: {type(coro)}")  # <class 'coroutine'>
    
    # íƒœìŠ¤í¬: ì´ë²¤íŠ¸ ë£¨í”„ì— ë“±ë¡ëœ ì½”ë£¨í‹´
    task = asyncio.create_task(my_coroutine())
    print(f"íƒ€ì…: {type(task)}")  # <class 'Task'>
    
    result = await task
    print(f"ê²°ê³¼: {result}")

asyncio.run(main())
```

### 4.2 ì—¬ëŸ¬ ì½”ë£¨í‹´ ë™ì‹œ ì‹¤í–‰

```python
import asyncio
import time

async def task(name, duration):
    print(f"{name} ì‹œì‘")
    await asyncio.sleep(duration)
    print(f"{name} ì™„ë£Œ")
    return f"{name} ê²°ê³¼"

async def main():
    start = time.time()
    
    # ë°©ë²• 1: asyncio.gather() - ê°€ì¥ ì¼ë°˜ì 
    results = await asyncio.gather(
        task("A", 2),
        task("B", 1),
        task("C", 3),
    )
    print(f"ê²°ê³¼: {results}")
    print(f"ì†Œìš” ì‹œê°„: {time.time() - start:.1f}ì´ˆ")

asyncio.run(main())
# ì•½ 3ì´ˆ ì†Œìš” (ê°€ì¥ ê¸´ ì‘ì—… ê¸°ì¤€)
```

### 4.3 asyncio.gather() vs asyncio.wait()

```python
import asyncio

async def task(name, duration):
    await asyncio.sleep(duration)
    return f"{name} ì™„ë£Œ"

async def main():
    # gather(): ê²°ê³¼ë¥¼ ë¦¬ìŠ¤íŠ¸ë¡œ ë°˜í™˜ (ê°€ì¥ ê°„ë‹¨)
    results = await asyncio.gather(
        task("A", 1),
        task("B", 2),
    )
    print(results)  # ['A ì™„ë£Œ', 'B ì™„ë£Œ']
    
    # wait(): ì™„ë£Œëœ ì‘ì—…ì„ ì¶”ì  (ë” ì„¸ë°€í•œ ì œì–´)
    tasks = [
        asyncio.create_task(task("X", 1)),
        asyncio.create_task(task("Y", 2)),
    ]
    done, pending = await asyncio.wait(tasks)
    print(f"ì™„ë£Œ: {len(done)}, ëŒ€ê¸°ì¤‘: {len(pending)}")
```

### 4.4 TaskGroup (Python 3.11+)

```python
import asyncio

async def task(name, duration):
    await asyncio.sleep(duration)
    return f"{name} ì™„ë£Œ"

async def main():
    # TaskGroup: êµ¬ì¡°í™”ëœ ë™ì‹œì„±
    # ì»¨í…ìŠ¤íŠ¸ë¥¼ ë²—ì–´ë‚  ë•Œ ëª¨ë“  ì‘ì—…ì´ ì™„ë£Œë˜ê±°ë‚˜ ì˜ˆì™¸ ì²˜ë¦¬ê°€ ë³´ì¥ë¨
    async with asyncio.TaskGroup() as tg:
        task1 = tg.create_task(task("A", 1))
        task2 = tg.create_task(task("B", 2))
    
    print(task1.result())  # "A ì™„ë£Œ"
    print(task2.result())  # "B ì™„ë£Œ"

asyncio.run(main())
```

---

## 5. ë™ì‹œì„± ì œì–´

### 5.1 Semaphore - ë™ì‹œ ì‹¤í–‰ ìˆ˜ ì œí•œ

```python
import asyncio
import time

async def fetch_data(url, semaphore):
    async with semaphore:  # ë™ì‹œì— ìµœëŒ€ 3ê°œë§Œ ì‹¤í–‰
        print(f"ìš”ì²­ ì‹œì‘: {url}")
        await asyncio.sleep(2)
        print(f"ìš”ì²­ ì™„ë£Œ: {url}")
        return f"{url} ë°ì´í„°"

async def main():
    # ìµœëŒ€ 3ê°œì˜ ì½”ë£¨í‹´ë§Œ ë™ì‹œ ì‹¤í–‰
    semaphore = asyncio.Semaphore(3)
    
    tasks = [
        fetch_data(f"https://api.example.com/{i}", semaphore)
        for i in range(10)
    ]
    
    results = await asyncio.gather(*tasks)
    print(f"ì™„ë£Œ: {len(results)}ê°œ")

asyncio.run(main())
```

**ì‹¤ì œ ì‚¬ìš© ì‚¬ë¡€:**
- API ë ˆì´íŠ¸ ì œí•œ
- ì™¸ë¶€ ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ ì œí•œ
- ë„¤íŠ¸ì›Œí¬ ì—°ê²° í’€ ê´€ë¦¬

### 5.2 Lock - ì„ê³„ ì˜ì—­ ë³´í˜¸

```python
import asyncio

counter = 0
lock = asyncio.Lock()

async def increment():
    global counter
    async with lock:  # í•œ ë²ˆì— í•˜ë‚˜ì˜ ì½”ë£¨í‹´ë§Œ ì‹¤í–‰
        temp = counter
        await asyncio.sleep(0.01)
        counter = temp + 1
    return counter

async def main():
    tasks = [increment() for _ in range(100)]
    results = await asyncio.gather(*tasks)
    print(f"ìµœì¢… ê°’: {counter}")  # 100 (race condition ì—†ìŒ)

asyncio.run(main())
```

### 5.3 Event - ì‹ í˜¸ ëŒ€ê¸°

```python
import asyncio

async def waiter(event):
    print("ì´ë²¤íŠ¸ ëŒ€ê¸° ì¤‘...")
    await event.wait()
    print("ì´ë²¤íŠ¸ ë°œìƒ! ê³„ì† ì‹¤í–‰")

async def setter(event):
    await asyncio.sleep(2)
    print("ì´ë²¤íŠ¸ ë°œìƒ!")
    event.set()

async def main():
    event = asyncio.Event()
    
    # waiterëŠ” event.set()ì´ í˜¸ì¶œë  ë•Œê¹Œì§€ ëŒ€ê¸°
    await asyncio.gather(
        waiter(event),
        setter(event),
    )

asyncio.run(main())
```

### 5.4 Queue - ì‘ì—… í

```python
import asyncio

async def producer(queue):
    for i in range(5):
        await asyncio.sleep(1)
        print(f"ìƒì„±: {i}")
        await queue.put(i)
    # ì¢…ë£Œ ì‹ í˜¸
    await queue.put(None)

async def consumer(queue, consumer_id):
    while True:
        item = await queue.get()
        if item is None:
            break
        print(f"ì†Œë¹„ì {consumer_id}: ì²˜ë¦¬ ì¤‘ {item}")
        await asyncio.sleep(2)
    print(f"ì†Œë¹„ì {consumer_id}: ì¢…ë£Œ")

async def main():
    queue = asyncio.Queue()
    
    await asyncio.gather(
        producer(queue),
        consumer(queue, 1),
        consumer(queue, 2),
    )

asyncio.run(main())
```

---

## 6. ì˜ˆì™¸ ì²˜ë¦¬

### 6.1 ê¸°ë³¸ ì˜ˆì™¸ ì²˜ë¦¬

```python
import asyncio

async def failing_task():
    await asyncio.sleep(1)
    raise ValueError("ë­”ê°€ ì˜ëª»ëì–´!")

async def main():
    try:
        result = await failing_task()
    except ValueError as e:
        print(f"ì˜ˆì™¸ ì²˜ë¦¬: {e}")

asyncio.run(main())
```

### 6.2 gatherì—ì„œ ì˜ˆì™¸ ì²˜ë¦¬

```python
import asyncio

async def task(name, should_fail=False):
    await asyncio.sleep(1)
    if should_fail:
        raise ValueError(f"{name} ì‹¤íŒ¨")
    return f"{name} ì„±ê³µ"

async def main():
    # ì²« ë²ˆì§¸ ì˜ˆì™¸ì—ì„œ ì¤‘ë‹¨
    try:
        results = await asyncio.gather(
            task("A"),
            task("B", should_fail=True),
            task("C"),
        )
    except ValueError as e:
        print(f"ì˜ˆì™¸: {e}")
        # "B" ì‹¤íŒ¨ë¡œ ì¸í•´ "C"ëŠ” ì‹¤í–‰ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ

asyncio.run(main())
```

### 6.3 ì˜ˆì™¸ ë¬´ì‹œí•˜ê³  ê³„ì† ì‹¤í–‰

```python
import asyncio

async def task(name, should_fail=False):
    await asyncio.sleep(1)
    if should_fail:
        raise ValueError(f"{name} ì‹¤íŒ¨")
    return f"{name} ì„±ê³µ"

async def main():
    # return_exceptions=True: ì˜ˆì™¸ë„ ê²°ê³¼ë¡œ ë°˜í™˜
    results = await asyncio.gather(
        task("A"),
        task("B", should_fail=True),
        task("C"),
        return_exceptions=True,
    )
    
    for result in results:
        if isinstance(result, Exception):
            print(f"ì˜ˆì™¸: {result}")
        else:
            print(f"ê²°ê³¼: {result}")

asyncio.run(main())
# ê²°ê³¼: A ì„±ê³µ
# ì˜ˆì™¸: B ì‹¤íŒ¨
# ê²°ê³¼: C ì„±ê³µ
```

### 6.4 ExceptionGroup (Python 3.11+)

```python
import asyncio

async def task(name, should_fail=False):
    await asyncio.sleep(1)
    if should_fail:
        raise ValueError(f"{name} ì‹¤íŒ¨")
    return f"{name} ì„±ê³µ"

async def main():
    async with asyncio.TaskGroup() as tg:
        tg.create_task(task("A"))
        tg.create_task(task("B", should_fail=True))
        tg.create_task(task("C", should_fail=True))

try:
    asyncio.run(main())
except* ValueError as eg:
    for exc in eg.exceptions:
        print(f"ì˜ˆì™¸: {exc}")

# ì˜ˆì™¸: B ì‹¤íŒ¨
# ì˜ˆì™¸: C ì‹¤íŒ¨
```

---

## 7. ì‹¤ì „ íŒ¨í„´

### 7.1 Producer-Consumer íŒ¨í„´

```python
import asyncio
import time

async def producer(queue, name):
    """ë°ì´í„°ë¥¼ ìƒì„±í•˜ì—¬ íì— ì¶”ê°€"""
    for i in range(5):
        await asyncio.sleep(1)
        item = f"{name}_{i}"
        print(f"ìƒì‚°: {item}")
        await queue.put(item)

async def consumer(queue, consumer_id):
    """íì—ì„œ ë°ì´í„°ë¥¼ êº¼ë‚´ ì²˜ë¦¬"""
    while True:
        try:
            item = await asyncio.wait_for(queue.get(), timeout=10)
            if item is None:  # ì¢…ë£Œ ì‹ í˜¸
                break
            print(f"ì†Œë¹„ì {consumer_id}: ì²˜ë¦¬ {item}")
            await asyncio.sleep(2)
        except asyncio.TimeoutError:
            break

async def main():
    queue = asyncio.Queue(maxsize=3)
    
    await asyncio.gather(
        producer(queue, "P1"),
        consumer(queue, 1),
        consumer(queue, 2),
    )

asyncio.run(main())
```

### 7.2 ì¬ì‹œë„ íŒ¨í„´ (Retry with Exponential Backoff)

```python
import asyncio
import random

async def unreliable_task(task_id):
    """50% í™•ë¥ ë¡œ ì‹¤íŒ¨í•˜ëŠ” ì‘ì—…"""
    if random.random() < 0.5:
        raise ConnectionError("ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜")
    return f"ì‘ì—… {task_id} ì™„ë£Œ"

async def retry_task(task_id, max_retries=3):
    """ì¬ì‹œë„ ë¡œì§ì´ ìˆëŠ” ì‘ì—…"""
    for attempt in range(max_retries):
        try:
            result = await unreliable_task(task_id)
            return result
        except ConnectionError as e:
            if attempt < max_retries - 1:
                wait_time = 2 ** attempt  # ì§€ìˆ˜ ë°±ì˜¤í”„
                print(f"ì¬ì‹œë„ {attempt + 1}: {wait_time}ì´ˆ ëŒ€ê¸°")
                await asyncio.sleep(wait_time)
            else:
                raise

async def main():
    try:
        result = await retry_task(1)
        print(f"ì„±ê³µ: {result}")
    except Exception as e:
        print(f"ìµœì¢… ì‹¤íŒ¨: {e}")

asyncio.run(main())
```

### 7.3 íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬

```python
import asyncio

async def slow_task():
    await asyncio.sleep(5)
    return "ì™„ë£Œ"

async def main():
    try:
        # 3ì´ˆ ì´ë‚´ì— ì™„ë£Œë˜ì§€ ì•Šìœ¼ë©´ TimeoutError
        result = await asyncio.wait_for(slow_task(), timeout=3)
        print(result)
    except asyncio.TimeoutError:
        print("íƒ€ì„ì•„ì›ƒ! ì‘ì—…ì´ ë„ˆë¬´ ì˜¤ë˜ ê±¸ë ¸ìŠµë‹ˆë‹¤")

asyncio.run(main())
```

### 7.4 ì¡°ê±´ë¶€ ë³‘ë ¬ ì²˜ë¦¬

```python
import asyncio

async def api_call(url):
    print(f"API í˜¸ì¶œ: {url}")
    await asyncio.sleep(1)
    return f"{url} ê²°ê³¼"

async def main():
    urls = ["api1", "api2", "api3", "api4", "api5"]
    
    # ëª¨ë“  ì‘ì—…ì„ ë™ì‹œì— ì‹œì‘í•˜ë˜, 3ê°œì”©ë§Œ ì‹¤í–‰
    semaphore = asyncio.Semaphore(3)
    
    async def limited_call(url):
        async with semaphore:
            return await api_call(url)
    
    results = await asyncio.gather(*[limited_call(url) for url in urls])
    print(results)

asyncio.run(main())
```

---

## 8. ë¼ì´ë¸ŒëŸ¬ë¦¬ ìƒíƒœê³„

### 8.1 HTTP í´ë¼ì´ì–¸íŠ¸: aiohttp vs httpx

#### aiohttp
```python
import asyncio
import aiohttp

async def fetch_multiple():
    async with aiohttp.ClientSession() as session:
        urls = [
            "https://api.example.com/data1",
            "https://api.example.com/data2",
            "https://api.example.com/data3",
        ]
        
        tasks = [session.get(url) for url in urls]
        responses = await asyncio.gather(*tasks)
        
        results = []
        for response in responses:
            data = await response.json()
            results.append(data)
        
        return results

asyncio.run(fetch_multiple())
```

**aiohttp íŠ¹ì§•:**
- ë¹„ë™ê¸° ì „ìš© (async í´ë¼ì´ì–¸íŠ¸ë§Œ ì§€ì›)
- ì›¹ì„œë²„ ê¸°ëŠ¥ë„ ì œê³µ
- WebSocket ì§€ì›
- ì„±ëŠ¥ ìš°ìˆ˜

#### httpx
```python
import asyncio
import httpx

async def fetch_multiple():
    # ë™ê¸°/ë¹„ë™ê¸° ëª¨ë‘ ì§€ì›
    async with httpx.AsyncClient() as client:
        urls = [
            "https://api.example.com/data1",
            "https://api.example.com/data2",
            "https://api.example.com/data3",
        ]
        
        tasks = [client.get(url) for url in urls]
        responses = await asyncio.gather(*tasks)
        
        results = [r.json() for r in responses]
        return results

asyncio.run(fetch_multiple())
```

**httpx íŠ¹ì§•:**
- ë™ê¸°/ë¹„ë™ê¸° ëª¨ë‘ ì§€ì› (requestsì™€ í˜¸í™˜)
- HTTP/2 ì§€ì›
- ê°œë°œ í¸ì˜ì„± ë†’ìŒ

### 8.2 ì›¹ ìë™í™”: Playwright with asyncio

```python
import asyncio
from playwright.async_api import async_playwright

async def scrape_multiple_pages():
    async with async_playwright() as p:
        browser = await p.chromium.launch()
        
        # ì—¬ëŸ¬ í˜ì´ì§€ë¥¼ ë™ì‹œì— ì²˜ë¦¬
        page1 = await browser.new_page()
        page2 = await browser.new_page()
        
        await asyncio.gather(
            page1.goto("https://example.com/page1"),
            page2.goto("https://example.com/page2"),
        )
        
        # ë³‘ë ¬ ë°ì´í„° ì¶”ì¶œ
        data = await asyncio.gather(
            page1.text_content(),
            page2.text_content(),
        )
        
        await browser.close()
        return data

asyncio.run(scrape_multiple_pages())
```

**Playwright vs Selenium**
- Playwright: ë” ë¹ ë¦„, ìµœì‹  API, ë¹„ë™ê¸° ì§€ì› ìš°ìˆ˜
- Selenium: ë” ë§ì€ ë¸Œë¼ìš°ì € ì§€ì›, ì»¤ë®¤ë‹ˆí‹° ê·œëª¨ í¬ìŒ

### 8.3 ì›¹ í”„ë ˆì„ì›Œí¬: FastAPI

```python
from fastapi import FastAPI
import asyncio

app = FastAPI()

@app.get("/")
async def read_root():
    # ë¹„ë™ê¸° I/O ì‘ì—…
    result = await asyncio.sleep(1)
    return {"message": "Hello World"}

# FastAPIëŠ” asyncioë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘
# ìë™ìœ¼ë¡œ ì—¬ëŸ¬ ìš”ì²­ì„ ë™ì‹œì— ì²˜ë¦¬
```

---

## 9. ì„±ëŠ¥ ìµœì í™”

### 9.1 ë³‘ëª© ì‹ë³„

```python
import asyncio
import time
import logging

logging.basicConfig(level=logging.DEBUG)
logger = logging.getLogger(__name__)

async def slow_task(name, duration):
    logger.debug(f"[ì‹œì‘] {name}")
    await asyncio.sleep(duration)
    logger.debug(f"[ë] {name}")

async def main():
    start = time.time()
    
    await asyncio.gather(
        slow_task("A", 2),
        slow_task("B", 1),
        slow_task("C", 3),
    )
    
    elapsed = time.time() - start
    logger.info(f"ì´ ì†Œìš” ì‹œê°„: {elapsed:.2f}ì´ˆ")

asyncio.run(main())
```

### 9.2 í”„ë¡œíŒŒì¼ë§

```python
import asyncio
import time
from functools import wraps

def async_timer(func):
    @wraps(func)
    async def wrapper(*args, **kwargs):
        start = time.time()
        result = await func(*args, **kwargs)
        elapsed = time.time() - start
        print(f"{func.__name__}: {elapsed:.4f}ì´ˆ")
        return result
    return wrapper

@async_timer
async def fetch_data():
    await asyncio.sleep(1)
    return "ë°ì´í„°"

async def main():
    await fetch_data()

asyncio.run(main())
```

### 9.3 ë©”ëª¨ë¦¬ ê´€ë¦¬

```python
import asyncio
import gc

async def memory_heavy_task():
    # ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬
    data = [i for i in range(1000000)]
    await asyncio.sleep(1)
    # ëª…ì‹œì ìœ¼ë¡œ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜
    del data
    gc.collect()

async def main():
    tasks = [memory_heavy_task() for _ in range(10)]
    await asyncio.gather(*tasks)

asyncio.run(main())
```

### 9.4 UV Loop (ê³ ì„±ëŠ¥ ì´ë²¤íŠ¸ ë£¨í”„)

```python
# pip install uvloop

import asyncio
import uvloop

# í‘œì¤€ asyncioë³´ë‹¤ 2-4ë°° ë¹ ë¦„
asyncio.set_event_loop_policy(uvloop.EventLoopPolicy())

async def main():
    # ë¹ ë¥¸ ì´ë²¤íŠ¸ ë£¨í”„ì—ì„œ ì‹¤í–‰
    await asyncio.sleep(0.1)

asyncio.run(main())
```

---

## 10. ì‹¤ìŠµ í”„ë¡œì íŠ¸

### í”„ë¡œì íŠ¸ 1: ë‹¤ì¤‘ API ë°ì´í„° ìˆ˜ì§‘ê¸°

```python
import asyncio
import aiohttp
from datetime import datetime

class DataCollector:
    def __init__(self, max_concurrent=3):
        self.semaphore = asyncio.Semaphore(max_concurrent)
        self.results = []
    
    async def fetch(self, session, url):
        async with self.semaphore:
            try:
                async with session.get(url, timeout=10) as response:
                    print(f"âœ“ {url} - {response.status}")
                    return await response.json()
            except Exception as e:
                print(f"âœ— {url} - {e}")
                return None
    
    async def collect_all(self, urls):
        async with aiohttp.ClientSession() as session:
            tasks = [self.fetch(session, url) for url in urls]
            self.results = await asyncio.gather(*tasks)
        return self.results

async def main():
    collector = DataCollector(max_concurrent=3)
    
    urls = [
        "https://api.github.com/users/github",
        "https://api.github.com/users/google",
        "https://api.github.com/users/microsoft",
        "https://api.github.com/users/facebook",
    ]
    
    results = await collector.collect_all(urls)
    print(f"\nìˆ˜ì§‘ ì™„ë£Œ: {len([r for r in results if r])}ê°œ")

asyncio.run(main())
```

### í”„ë¡œì íŠ¸ 2: ì›¹ ìŠ¤í¬ë˜í¼ (Playwright)

```python
import asyncio
from playwright.async_api import async_playwright

class WebScraper:
    def __init__(self, max_concurrent=2):
        self.semaphore = asyncio.Semaphore(max_concurrent)
    
    async def scrape_url(self, browser, url):
        async with self.semaphore:
            try:
                page = await browser.new_page()
                await page.goto(url, timeout=10000)
                title = await page.title()
                content = await page.text_content()
                await page.close()
                return {"url": url, "title": title, "length": len(content)}
            except Exception as e:
                return {"url": url, "error": str(e)}
    
    async def scrape_multiple(self, urls):
        async with async_playwright() as p:
            browser = await p.chromium.launch()
            tasks = [self.scrape_url(browser, url) for url in urls]
            results = await asyncio.gather(*tasks)
            await browser.close()
            return results

async def main():
    scraper = WebScraper(max_concurrent=2)
    
    urls = [
        "https://example.com",
        "https://google.com",
        "https://github.com",
    ]
    
    results = await scraper.scrape_multiple(urls)
    for result in results:
        print(result)

asyncio.run(main())
```

### í”„ë¡œì íŠ¸ 3: ì‘ì—… ìŠ¤ì¼€ì¤„ëŸ¬

```python
import asyncio
from datetime import datetime, timedelta

class TaskScheduler:
    def __init__(self):
        self.tasks = []
        self.running = False
    
    async def schedule_task(self, task_func, delay_seconds, task_name="Task"):
        """ì§€ì •ëœ ì‹œê°„ í›„ ì‘ì—… ì‹¤í–‰"""
        await asyncio.sleep(delay_seconds)
        print(f"[{datetime.now()}] {task_name} ì‹¤í–‰")
        result = await task_func()
        return result
    
    async def repeat_task(self, task_func, interval_seconds, task_name="Task"):
        """ì£¼ê¸°ì ìœ¼ë¡œ ì‘ì—… ë°˜ë³µ"""
        while self.running:
            print(f"[{datetime.now()}] {task_name} ì‹¤í–‰")
            await task_func()
            await asyncio.sleep(interval_seconds)
    
    async def start_scheduler(self):
        self.running = True
        print("ìŠ¤ì¼€ì¤„ëŸ¬ ì‹œì‘")
    
    async def stop_scheduler(self):
        self.running = False
        print("ìŠ¤ì¼€ì¤„ëŸ¬ ì¤‘ì§€")

async def example_task():
    await asyncio.sleep(1)
    print("ì‘ì—… ì™„ë£Œ")

async def main():
    scheduler = TaskScheduler()
    
    await scheduler.start_scheduler()
    
    # 3ì´ˆ í›„ í•œ ë²ˆ ì‹¤í–‰
    await scheduler.schedule_task(
        example_task,
        delay_seconds=3,
        task_name="ì¼íšŒì„± ì‘ì—…"
    )
    
    # ì£¼ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ (5ì´ˆ ë§ˆë‹¤)
    repeat_task = asyncio.create_task(
        scheduler.repeat_task(
            example_task,
            interval_seconds=5,
            task_name="ë°˜ë³µ ì‘ì—…"
        )
    )
    
    await asyncio.sleep(20)  # 20ì´ˆ ë™ì•ˆ ì‹¤í–‰
    await scheduler.stop_scheduler()
    
    try:
        await asyncio.wait_for(repeat_task, timeout=1)
    except asyncio.TimeoutError:
        repeat_task.cancel()

asyncio.run(main())
```

---

## í•™ìŠµ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ê¸°ì´ˆ (1-2ì¼)
- [ ] ë™ê¸° vs ë¹„ë™ê¸° ê°œë… ì´í•´
- [ ] async/await ë¬¸ë²• í•™ìŠµ
- [ ] asyncio.run() ì‚¬ìš©ë²• ìˆ™ì§€
- [ ] ê°„ë‹¨í•œ ì½”ë£¨í‹´ ì‘ì„±

### ì¤‘ê¸‰ (3-5ì¼)
- [ ] ì´ë²¤íŠ¸ ë£¨í”„ ë©”ì»¤ë‹ˆì¦˜ ì´í•´
- [ ] asyncio.gather(), asyncio.wait() í™œìš©
- [ ] Semaphore, Lock ì‚¬ìš©
- [ ] ì˜ˆì™¸ ì²˜ë¦¬ íŒ¨í„´

### ê³ ê¸‰ (6-10ì¼)
- [ ] Producer-Consumer íŒ¨í„´ êµ¬í˜„
- [ ] aiohttp/httpxë¡œ ì‹¤ì œ API í˜¸ì¶œ
- [ ] Playwrightë¡œ ì›¹ ìŠ¤í¬ë˜í•‘
- [ ] ì„±ëŠ¥ ìµœì í™” ë° í”„ë¡œíŒŒì¼ë§

### ì‹¤ì „ (11+ì¼)
- [ ] FastAPIë¡œ ë¹„ë™ê¸° ì›¹ì„œë²„ êµ¬ì¶•
- [ ] ë³µì¡í•œ ë¹„ë™ê¸° ì•„í‚¤í…ì²˜ ì„¤ê³„
- [ ] í”„ë¡œë•ì…˜ í™˜ê²½ ë°°í¬ ë° ëª¨ë‹ˆí„°ë§

---

## í”í•œ ì‹¤ìˆ˜ì™€ í•´ê²°ì±…

### âŒ ì‹¤ìˆ˜ 1: await ì—†ì´ ì½”ë£¨í‹´ í˜¸ì¶œ

```python
# âŒ ì˜ëª»ë¨
async def main():
    fetch_data()  # ì‹¤í–‰ë˜ì§€ ì•ŠìŒ!

# âœ… ì˜¬ë°”ë¦„
async def main():
    await fetch_data()
```

### âŒ ì‹¤ìˆ˜ 2: ë™ê¸° í•¨ìˆ˜ì—ì„œ await ì‚¬ìš©

```python
# âŒ ì˜ëª»ë¨
def sync_function():
    await asyncio.sleep(1)  # SyntaxError!

# âœ… ì˜¬ë°”ë¦„
async def async_function():
    await asyncio.sleep(1)
```

### âŒ ì‹¤ìˆ˜ 3: time.sleep() ì‚¬ìš©

```python
# âŒ ì˜ëª»ë¨ (ì´ë²¤íŠ¸ ë£¨í”„ ë¸”ë¡œí‚¹)
async def main():
    time.sleep(5)  # ë‹¤ë¥¸ ì‘ì—… ì‹¤í–‰ ë¶ˆê°€ëŠ¥

# âœ… ì˜¬ë°”ë¦„
async def main():
    await asyncio.sleep(5)  # ë‹¤ë¥¸ ì‘ì—… ì‹¤í–‰ ê°€ëŠ¥
```

### âŒ ì‹¤ìˆ˜ 4: ì—¬ëŸ¬ ì½”ë£¨í‹´ì„ ìˆœì°¨ ì‹¤í–‰

```python
# âŒ ëŠë¦¼ (6ì´ˆ)
async def main():
    await task(1)  # 2ì´ˆ
    await task(2)  # 2ì´ˆ
    await task(3)  # 2ì´ˆ

# âœ… ë¹ ë¦„ (2ì´ˆ)
async def main():
    await asyncio.gather(
        task(1),
        task(2),
        task(3),
    )
```

---

## ì°¸ê³  ìë£Œ

- [Python asyncio ê³µì‹ ë¬¸ì„œ](https://docs.python.org/3/library/asyncio.html)
- [FastAPI ë¹„ë™ê¸° ë¬¸ì„œ](https://fastapi.tiangolo.com/async/)
- [Real Python - Async IO in Python](https://realpython.com/async-io-python/)

---

## ë§ˆì¹˜ë©°

ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°ì€ í˜„ëŒ€ Python ê°œë°œì˜ í•„ìˆ˜ ê¸°ìˆ ì…ë‹ˆë‹¤. ì´ ê°€ì´ë“œë¥¼ ë”°ë¼ ë‹¨ê³„ì ìœ¼ë¡œ í•™ìŠµí•˜ë©´ì„œ:

1. **ê¸°ì´ˆë¶€í„° ì‹œì‘**: async/await ë¬¸ë²• ìˆ™ë‹¬
2. **ì›ë¦¬ ì´í•´**: ì´ë²¤íŠ¸ ë£¨í”„ ë©”ì»¤ë‹ˆì¦˜ íŒŒì•…
3. **íŒ¨í„´ ìŠµë“**: Producer-Consumer, ì¬ì‹œë„ ë“± ì‹¤ì „ íŒ¨í„´
4. **ì‹¤ì „ í™œìš©**: aiohttp, Playwright ë“± ë¼ì´ë¸ŒëŸ¬ë¦¬ í™œìš©
5. **ìµœì í™”**: ì„±ëŠ¥ ì¸¡ì • ë° ê°œì„ 

ì„±ê³µì ì¸ ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë° í•™ìŠµì„ ì‘ì›í•©ë‹ˆë‹¤! ğŸš€

---

**ì‘ì„±ì¼**: 2026ë…„ 1ì›” 23ì¼  
**ë²„ì „**: 1.0  
**ë‚œì´ë„**: ì´ˆê¸‰ ~ ê³ ê¸‰